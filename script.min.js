document.addEventListener('DOMContentLoaded',function(){initBannerSlider(),initNavigation(),initScrollAnimations(),initServiceCards(),initCaseNavigation()});function initBannerSlider(){const e=document.querySelectorAll('.banner-slide'),t=document.querySelector('.banner-btn-prev'),n=document.querySelector('.banner-btn-next');let i=0,s;if(!e.length)return;createBannerControls();function o(t){e.forEach(e=>e.classList.remove('active')),i=(t+e.length)%e.length,e[i].classList.add('active');const n=e[i].querySelector('.banner-title'),s=e[i].querySelector('.banner-subtitle');n&&s&&(n.style.opacity='0',n.style.transform='translateY(30px)',s.style.opacity='0',s.style.transform='translateY(30px)',n.offsetHeight,s.offsetHeight,setTimeout(()=>{n.style.opacity='1',n.style.transform='translateY(0)',s.style.opacity='1',s.style.transform='translateY(0)'},100))}function a(){o(i+1)}function l(){o(i-1)}function r(){s=setInterval(a,5e3)}function c(){clearInterval(s)}function d(){const e=document.querySelector('.banner-section');if(!e)return;let t=e.querySelector('.banner-controls');t||(t=document.createElement('div'),t.className='banner-controls',t.innerHTML=`<button class="banner-btn banner-btn-prev">‹</button>
                   <button class="banner-btn banner-btn-next">›</button>`,e.appendChild(t));const n=t.querySelector('.banner-btn-prev'),i=t.querySelector('.banner-btn-next');n&&n.addEventListener('click',()=>{c(),l(),r()}),i&&i.addEventListener('click',()=>{c(),a(),r()})}document.addEventListener('keydown',function(e){e.key==='ArrowLeft'&&(c(),l(),r()),e.key==='ArrowRight'&&(c(),a(),r())});const u=document.querySelector('.banner-section');u&&(u.addEventListener('mouseenter',c),u.addEventListener('mouseleave',r)),o(0),r()}function initNavigation(){const e=document.querySelectorAll('.nav-item'),t=document.querySelector('.nav-underline');!e.length||!t||e.forEach((n,i)=>{n.addEventListener('mouseenter',function(){const e=this.getBoundingClientRect(),n=this.parentElement.getBoundingClientRect(),i=e.left-n.left;t.style.left=i+'px',t.style.width=e.width+'px'}),n.addEventListener('click',function(){e.forEach(e=>e.classList.remove('active')),this.classList.add('active');const n=this.getBoundingClientRect(),i=this.parentElement.getBoundingClientRect(),s=n.left-i.left;t.style.left=s+'px',t.style.width=n.width+'px'})});const n=document.querySelector('.nav-menu');n&&n.addEventListener('mouseleave',function(){const e=document.querySelector('.nav-item.active');if(e){const n=e.getBoundingClientRect(),i=e.parentElement.getBoundingClientRect(),s=n.left-i.left;t.style.left=s+'px',t.style.width=n.width+'px'}})}function initScrollAnimations(){const e={threshold:.1,rootMargin:'0px 0px -50px 0px'},t=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&e.target.classList.add('animate-in')})},e),n=document.querySelectorAll('.service-card, .industry-item, .case-item, .partner-logo');n.forEach(e=>{t.observe(e)});function i(){const e=document.querySelectorAll('.stat-number');e.forEach(e=>{const t=parseInt(e.getAttribute('data-target')),n=e.querySelector('.stat-unit')?.textContent||'';let i=0;const s=t/50,o=setInterval(()=>{i+=s,i>=t&&(i=t,clearInterval(o)),e.innerHTML=Math.floor(i)+'<span class="stat-unit">'+n+'</span>'},30)})}const s=document.querySelectorAll('.stat-box'),o=new IntersectionObserver(function(e){e.forEach(e=>{if(e.isIntersecting){e.target.classList.remove('loading'),e.target.classList.add('animated');const t=e.target.querySelector('.stat-number');t&&!t.classList.contains('animated')&&setTimeout(()=>{t.classList.add('animated'),i()},200)}})},{threshold:.5});s.forEach(e=>{o.observe(e)})}function initServiceCards(){const e=document.querySelectorAll('.service-card');e.forEach(e=>{e.addEventListener('mouseenter',function(){this.style.transform='translateY(-10px)'}),e.addEventListener('mouseleave',function(){this.style.transform='translateY(0)'})})}function initCaseNavigation(){const e=document.querySelectorAll('.cases-nav-item'),t=document.querySelectorAll('.case-item');!e.length||e.forEach(e=>{e.addEventListener('click',function(){e.forEach(e=>e.classList.remove('active')),this.classList.add('active');const n=this.textContent.trim();filterCases(n)})})}function filterCases(e){const t=document.querySelectorAll('.case-item');t.forEach(t=>{(e==='首页'||e==='全部')?(t.style.display='block',t.style.opacity='0',setTimeout(()=>{t.style.opacity='1'},100)):(t.style.display='block',t.style.opacity='0',setTimeout(()=>{t.style.opacity='1'},100))})}function smoothScrollTo(e,t=800){const n=e.offsetTop,i=window.pageYOffset,s=n-i;let o=null;function a(e){o===null&&(o=e);const l=e-o,r=(t=>{t/=t/2;if(t<1)return t*t/2;t--;return-1/2*(t*(t-2)-1)})(l);window.scrollTo(0,r),l<t&&requestAnimationFrame(a)}requestAnimationFrame(a);function e(t,e){t/=t/2;if(t<1)return t*t/2+0;t--;return-1/2*(t*(t-2)-1)+0}}function debounce(e,t){let n;return function(...i){const s=()=>{clearTimeout(n),e(...i)};clearTimeout(n),n=setTimeout(s,t)}}function throttle(e,t){let n;return function(){const i=arguments,s=this;n||(e.apply(s,i),n=!0,setTimeout(()=>n=!1,t))}}window.zijinDesign={smoothScrollTo,debounce,throttle,filterCases};